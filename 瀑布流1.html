<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    *{margin: 0;padding: 0;}
    .item{
      width: 100px;
      font-size: 30px;
      height: 100%;
      grid-row-start: auto;
    }

    .wrap{
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;  
      /* grid-template-rows: 1fr 1fr 1fr; */
      /* 设定隐藏的网格的宽 */
      grid-auto-rows: 1px;
      column-gap: 10px;
      /* height: 540px; */
    }
    img{
      width: 100px;
    }
    /* .item:first-child{
      grid-row-start: auto;
      grid-row-end: span 10;
    }
    .item:nth-child(2){
      grid-row-start: auto;
      grid-row-end: span 15;
    } */
  </style>
</head>
<body>
  <div class="wrap">
    <!-- <div class="item">1</div>
    <div class="item">2</div>
    <div class="item">3</div>
    <div class="item">4</div>
    <div class="item">5</div>
    <div class="item">6</div>
    <div class="item">7</div>
    <div class="item">8</div>
    <div class="item">9</div> -->
    <div class="item">
      <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201908%2F19%2F20190819150344_ALnaX.thumb.1000_0.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1662863182&t=bf07dfe0a70d032e698cc57c13e57a31" alt="">
      
    </div>
    <div class="item">
      <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fblog%2F202107%2F09%2F20210709142454_dc8dc.thumb.1000_0.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1662863182&t=1d21087b94a8533fc3b733e119d7adf2" alt="">
      
    </div>
    <div class="item">
      <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F202101%2F22%2F20210122021849_jillt.thumb.1000_0.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1662863182&t=ac01b64ea67be19fd9f116bff58e3ade" alt="">
      
    </div>
    <div class="item">
      <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F202105%2F29%2F20210529001057_aSeLB.thumb.1000_0.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1662863182&t=c6b36c4057ca23f5d964f836b11d6f5f" alt="">
      
    </div>
    <div class="item">
      <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201809%2F01%2F20180901214613_VXdRf.thumb.700_0.jpeg&refer=http%3A%2F%2Fb-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1662863182&t=012e55e81011c324ba4ec47a7adac7e5" alt="">
      
    </div>
    <div class="item">
      <img src="https://img2.baidu.com/it/u=4286724097,1475456570&fm=253&fmt=auto&app=120&f=JPEG?w=889&h=500" alt="">
      
    </div>
    <div class="item">
      <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Ffile01.16sucai.com%2Fd%2Ffile%2F2012%2F1115%2F20121115085616757.jpg&refer=http%3A%2F%2Ffile01.16sucai.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1662863358&t=eee9b55f3dfc7e632db3d404e8955b68" alt="">
      
    </div>
    <div class="item">
      <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.jj20.com%2Fup%2Fallimg%2F911%2F100G6110A6%2F16100G10A6-9.jpg&refer=http%3A%2F%2Fpic.jj20.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1662863358&t=8da14a4b75a1c650650130e8b3d65f01" alt="">
      
    </div>
  </div>

  <script>
    let items = document.querySelectorAll('.item')
    Array.from(items).forEach((item, index) => {
      // item.style.height = (Math.random() * 100 + 100) + 'px'
      item.style.background = `rgb(${255 * Math.random()}, ${255 * Math.random()}, ${255 * Math.random()})`

      let src = item.querySelector('img').getAttribute('src')
      let image = new Image()
      image.src = src
      let width = item.querySelector('img').width
      image.onload = function() {
        let w = image.width
        let h = image.height
        let height = Math.round(h * width / w)
        item.style.gridRowEnd = `span ${~~(height)}`
      }
    })
  </script>
</body>
</html>